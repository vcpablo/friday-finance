import { defineNuxtModule, addPluginTemplate } from '@nuxt/kit';
import { dirname, resolve } from 'pathe';
import { fileURLToPath } from 'url';

const distDir = dirname(fileURLToPath(import.meta.url));

const module = defineNuxtModule({
  meta: {
    name: "tailvue",
    configKey: "tailvue"
  },
  defaults: {
    addPlugin: true
  },
  setup() {
    addPluginTemplate({
      filename: "plugin.mjs",
      src: resolve(distDir, "runtime/plugin.mjs"),
      mode: "client"
    });
  }
});

export { module as default };
